
<div class="container">
  <div class="calender-header">
    <h1>Your Calendar:</h1>
  </div class="calendar-box">
  <%= month_calendar(events: @meetups_accepted) do |date, meetups| %>

    <%= date.strftime("%d") %>
    <% meetups.each do |meetup| %>
      <i class="fa fa-solid fa-circle" data-bs-toggle="modal" data-bs-target="#exampleModal"></i>

<!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <% if meetup.user_one == current_user %>
                  <h5 class="modal-title" id="exampleModalLabel">Training with <%= meetup.user_two.first_name %></h5>
                <% else %>
                  <h5 class="modal-title" id="exampleModalLabel">Training with <%= meetup.user_one.first_name %></h5>
                <% end %>
                <div class="button-secondary close" data-bs-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </div>
              </div>
              <div class="modal-body">
                <i class="fa fa-solid fa-clock"></i> <%= meetup.date.strftime("%H:%M") %>
              </div>
              <div class="modal-footer">
                <div class="button-secondary gymally-semibold" data-bs-dismiss="modal"><%= link_to 'Cancel this training', friendship_delete_meetup_path(meetup.friendship, meetup), method: :delete, data: { confirm: "Are You sure you want to cancel this meetup?" } %></div>
              </div>
            </div>
          </div>
        </div>
    <% end %>
  <% end %>
  <% if @meetups_accepted.length > 0 %>
    <h3>Upcoming:</h3>
    <% @meetups_accepted.each do |meetup| %>
      <% if meetup.user_two == current_user %>
        <p>with </p><%= meetup.user_one.first_name %> on the <%= meetup.date.strftime("%A, %B %e") %>
        <%= link_to 'Cancel', friendship_delete_meetup_path(meetup.friendship, meetup),
                method: :delete,
                data: { confirm: "Are You sure you want to cancel this meetup?" } %>
      <% else %>
        <p>with </p><%= meetup.user_two.first_name %> on the <%= meetup.date.strftime("%A, %B %e") %>
        <%= link_to 'Cancel', friendship_delete_meetup_path(meetup.friendship, meetup),
                method: :delete,
                data: { confirm: "Are You sure you want to cancel this meetup?" } %>
      <% end %>
    <% end %>

  <% end %>
  <% if @meetups_requests.length > 0 %>
  <h3>Meetup requests from you:</h3>
    <% @meetups_requests.each do |meetup| %>
      <% if meetup.user_two == current_user %>
        <p>to </p><%= meetup.user_one.first_name %> on the <%= meetup.date.strftime("%A, %B %e") %>
        <%= link_to 'Cancel', friendship_delete_meetup_path(meetup.friendship, meetup),
                method: :delete,
                data: { confirm: "Are You sure you want to cancel this meetup?" } %>
      <% else %>
        <p>to: </p><%= meetup.user_two.first_name %> on the <%= meetup.date.strftime("%A, %B %e") %>
        <%= link_to 'Cancel', friendship_delete_meetup_path(meetup.friendship, meetup),
                method: :delete,
                data: { confirm: "Are You sure you want to cancel this meetup?" } %>
      <% end %>
    <% end %>
  <% end %>
  <% if @meetups_invitations.length > 0 %>
  <h3>Meetup invitations for you:</h3>
    <% @meetups_invitations.each do |meetup| %>
      <% if meetup.user_two == current_user %>
        <p>meetup invitation from <%= meetup.user_one.first_name %> on the <%= meetup.date.strftime("%A, %B %e") %> at <%= meetup.date.strftime("%H:%M:%S").first(5) %></p>
        <%= link_to "Accept", friendship_update_meetup_path(meetup.friendship, meetup), method: :post %>
        <%= link_to "Deny", friendship_delete_meetup_path(meetup.friendship, meetup), method: :delete,
                  data: { confirm: 'Are You sure?' } %>
      <% else %>
        <p>meetup invitation from <%= meetup.user_two.first_name %> on the <%= meetup.date.strftime("%A, %B %e") %> at <%= meetup.date.strftime("%H:%M:%S").first(5) %></p>
        <%= link_to "Accept", friendship_update_meetup_path(meetup.friendship, meetup), method: :post %>
        <%= link_to "Deny", friendship_delete_meetup_path(meetup.friendship, meetup), method: :delete,
                  data: { confirm: 'Are You sure?' } %>
      <% end %>
    <% end %>
  <% end %>
</div>
