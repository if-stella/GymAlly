
<div class="container">
  <div class="calender-header">
    <h1>Your Calendar:</h1>
  </div class="calendar-box">
  <%= month_calendar(events: @meetups_accepted) do |date, meetups| %>

    <%= date.strftime("%d") %>
    <% meetups.each do |meetup| %>
      <% if meetup.user_two == current_user %>
        <% user_one = meetup.user_one %>
      <% else %>
        <% user_one = meetup.user_two %>
      <% end %>
        <%= render partial: "meetup_modal", locals: { user_one: user_one, meetup: meetup } %>
    <% end %>
  <% end %>
  <% if @meetups_accepted.length > 0 %>
  <div class="gymally-semibold">Upcoming:</div>
    <% @meetups_accepted.each do |meetup| %>
      <% if meetup.user_two == current_user %>
        <% user_one = meetup.user_one %>
      <% else %>
        <% user_one = meetup.user_two %>
      <% end %>
      <div class="meetup-info">
        <div><%= meetup.sport.name %> with <%= user_one.first_name %></div>
        <div><%= meetup.date.strftime("%a, %d %m %Y, %H:%M") %></div>
        <%= render partial: "user_modal", locals: { user_one: user_one, meetup: meetup } %>
      </div>
      <div>
        <%= link_to 'Cancel', friendship_delete_meetup_path(meetup.friendship, meetup), method: :delete, data: { confirm: "Are You sure you want to cancel this meetup?" } %>
      </div>
    <% end %>
  <% end %>
  <% if @meetups_requests.length > 0 %>
  <div class="gymally-semibold">Meetup requests from you:</div>
    <% @meetups_requests.each do |meetup| %>
      <% if meetup.user_two == current_user %>
        <% user_one = meetup.user_one %>
      <% else %>
        <% user_one = meetup.user_two %>
      <% end %>
      <p>to </p><%= user_one.first_name %> on the <%= meetup.date.strftime("%a, %d %m %Y, %H:%M") %><%= meetup.sport.name %>
              <%= render partial: "user_modal", locals: { user_one: user_one, meetup: meetup } %>
      <%= link_to 'Cancel', friendship_delete_meetup_path(meetup.friendship, meetup),
              method: :delete,
              data: { confirm: "Are You sure you want to cancel this meetup?" } %>
    <% end %>
  <% end %>
  <% if @meetups_invitations.length > 0 %>
  <div class="gymally-semibold">Meetup invitations for you:</div>
    <% @meetups_invitations.each do |meetup| %>
      <% if meetup.user_two == current_user %>
        <% user_one = meetup.user_one %>
      <% else %>
        <% user_one = meetup.user_two %>
      <% end %>
      <p>meetup invitation from <%= user_one.first_name %> on the <%= meetup.date.strftime("%a, %d %m %Y, %H:%M") %> at <%= meetup.date.strftime("%H:%M:%S").first(5) %><%= meetup.sport.name %></p>
              <%= render partial: "user_modal", locals: { user_one: user_one, meetup: meetup } %>

      <%= link_to "Accept", friendship_update_meetup_path(meetup.friendship, meetup), method: :post %>
      <%= link_to "Deny", friendship_delete_meetup_path(meetup.friendship, meetup), method: :delete,
                data: { confirm: 'Are You sure?' } %>
    <% end %>
  <% end %>
</div>
